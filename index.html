<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>MAD System - Online</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&family=Playfair+Display:wght@400;700&family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --theme-color: #D4AF37;
            --bg-sidebar: #1a1a1a;
            --bg-workspace: #f4f4f4;
            --font-main: 'Assistant', sans-serif;
            --sidebar-width: 300px;
        }

        @page { size: A4; margin: 0; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-workspace);
            font-family: var(--font-main);
            display: flex; height: 100vh; overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-sidebar); color: #fff;
            padding: 20px; overflow-y: auto;
            display: flex; flex-direction: column; gap: 20px;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2); z-index: 1000;
        }
        .panel-section { background: #252525; padding: 15px; border-radius: 8px; border: 1px solid #333; }
        .panel-title { font-size: 13px; color: var(--theme-color); font-weight: bold; margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px; }
        .btn-action { width: 100%; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; }
        .btn-print { background: var(--theme-color); color: #000; }
        .btn-upload { background: #333; color: #ccc; border: 1px dashed #555; font-size: 12px; padding: 8px; }
        select, input[type="range"] { width: 100%; margin-bottom: 5px; background: #333; color: white; border: 1px solid #444; padding: 5px; }

        /* Workspace */
        .workspace { flex-grow: 1; display: flex; justify-content: center; padding: 40px; overflow-y: auto; }
        .a4-page { width: 210mm; min-height: 296mm; background-color: white; position: relative; box-shadow: 0 0 25px rgba(0,0,0,0.1); padding: 20mm; box-sizing: border-box; display: flex; flex-direction: column; }

        /* Elements */
        .header-section { margin-bottom: 20px; text-align: center; }
        .logo-img { max-width: 100%; display: block; margin: 0 auto; }
        
        /* Ø§Ù„Ø®ØªÙ… Ù…Ø¹ Ø¬Ø¹Ù„ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø´ÙØ§ÙØ© */
        #stamp-wrapper { position: absolute; width: 200px; cursor: grab; z-index: 50; top: 78%; left: 10%; mix-blend-mode: multiply; }
        #stamp-wrapper img { width: 100%; pointer-events: none; }
        
        .footer-section { margin-top: auto; padding-top: 15px; border-top: 1px solid var(--theme-color); text-align: center; font-size: 11px; color: #555; }
        
        /* Tables & Content */
        .template-content { flex-grow: 1; outline: none; }
        table.mad-table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 14px; }
        table.mad-table th { background: #f8f8f8; border-bottom: 2px solid var(--theme-color); padding: 10px; }
        table.mad-table td { border-bottom: 1px solid #eee; padding: 10px; }
        
        .border-frame { position: absolute; top: 10mm; left: 10mm; right: 10mm; bottom: 10mm; border: 2px solid var(--theme-color); pointer-events: none; display: none; }
        .show-frame .border-frame { display: block; }

        @media print {
            body { background: white; display: block; }
            .sidebar { display: none; }
            .workspace { padding: 0; margin: 0; }
            .a4-page { box-shadow: none; width: 100%; height: 100%; margin: 0; }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <div style="text-align: center; color: white;">
            <h2 style="margin: 0;">MAD System</h2>
        </div>
        <hr style="border-color: #333; width: 100%;">

        <button class="btn-action btn-print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© / PDF</button>

        <div class="panel-section">
            <div class="panel-title">1. Ø§Ù„Ù‚ÙˆØ§Ù„×‘ (Templates)</div>
            <select id="templateSelect" onchange="loadTemplate(this.value)">
                <option value="letter">ğŸ“„ Ø±Ø³Ø§Ù„Ø© Ø±Ø³Ù…ÙŠØ©</option>
                <option value="invoice">ğŸ’° ÙØ§ØªÙˆØ±Ø© / Ø¹Ø±Ø¶ Ø³Ø¹Ø±</option>
                <option value="table">ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø¨ÙŠØ§Ù†Ø§Øª</option>
                <option value="legal">âš–ï¸ ØªØ¹Ù‡Ø¯ Ù‚Ø§Ù†ÙˆÙ†ÙŠ</option>
                <option value="memo">ğŸ“ Ù…Ø°ÙƒØ±Ø© Ø¯Ø§Ø®Ù„ÙŠØ©</option>
            </select>
        </div>

        <div class="panel-section">
            <div class="panel-title">2. Ø§Ù„ØªØµÙ…ÙŠÙ…</div>
            <div style="display: flex; gap: 5px; margin-bottom: 10px;">
                <button onclick="setTheme('#D4AF37')" style="flex:1; height:30px; background:#D4AF37; border:none; cursor:pointer;"></button>
                <button onclick="setTheme('#000000')" style="flex:1; height:30px; background:#000000; border:none; cursor:pointer;"></button>
                <button onclick="setTheme('#1a5f7a')" style="flex:1; height:30px; background:#1a5f7a; border:none; cursor:pointer;"></button>
            </div>
            <label style="font-size:12px;">Ø¥Ø·Ø§Ø±:</label>
            <select onchange="toggleFrame(this.value)"><option value="yes">Ù†Ø¹Ù…</option><option value="no">Ù„Ø§</option></select>
        </div>

        <div class="panel-section">
            <div class="panel-title">3. Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø­Ø¬Ù…</div>
            <div style="font-size:11px; color:#aaa;">Ø­Ø¬Ù… Ø§Ù„Ù„ÙˆØ¬Ùˆ</div>
            <input type="range" min="100" max="400" value="200" oninput="resizeEl('logoContainer', this.value, 'width')">
            <div style="font-size:11px; color:#aaa;">Ø­Ø¬Ù… Ø§Ù„Ø®ØªÙ…</div>
            <input type="range" min="50" max="400" value="200" oninput="resizeEl('stamp-wrapper', this.value, 'width')">
            
            <label class="btn-action btn-upload" style="margin-top:10px;">
                <i class="fas fa-upload"></i> ØªØºÙŠÙŠØ± Ø§Ù„Ù„ÙˆØ¬Ùˆ
                <input type="file" hidden onchange="loadImage(this, 'mainLogo')">
            </label>
        </div>
    </div>

    <div class="workspace">
        <div id="page" class="a4-page show-frame">
            <div class="border-frame"></div>

            <div class="header-section">
                <div id="logoContainer" style="width: 200px; margin: 0 auto;">
                    <img id="mainLogo" src="logo.jpg" class="logo-img" alt="LOGO" onerror="this.src='https://via.placeholder.com/200x80?text=MAD+LOGO'">
                </div>
            </div>

            <div id="stamp-wrapper" onmousedown="startDrag(event)">
                <img id="stampImg" src="signther.jpg" alt="Signature">
            </div>

            <div id="mainContent" class="template-content" contenteditable="true">
                </div>

            <div class="footer-section" contenteditable="true">
                <strong>MAD PARFUMEUR LTD</strong> | 515456093 | www.madperfume.co.il<br>
                ×©×™×¨×•×ª ×œ×§×•×—×•×ª: *9935 | Email: info@madperfume.co.il
            </div>
        </div>
    </div>

    <script>
        // Templates Data
        const templates = {
            letter: `
                <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 30px;">
                    <div><strong>×ª××¨×™×š:</strong> 07 ×™× ×•××¨ 2026</div>
                    <div><strong>×¡×™××•×›×™×Ÿ:</strong> LEG-01/26</div>
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>×œ×›×‘×•×“:</strong><br>×”× ×”×œ×ª ×§× ×™×•×Ÿ ××•×œ ×”×—×•×£ (Village)<br>×—×“×¨×”
                </div>
                <div style="text-align: center; text-decoration: underline; font-weight: bold; font-size: 18px; margin-bottom: 25px;">
                    ×”× ×“×•×Ÿ: ×”×‘×”×¨×” ×•×”×©×œ××ª ×¤×¨×˜×™× - ×‘×§×©×” ×œ×”×¢×‘×¨×ª ×–×›×•×™×•×ª ×‘× ×›×¡
                </div>
                <div style="text-align: justify; line-height: 1.6;">
                    <p><strong>×.×’.× ,</strong></p>
                    <p>×‘×”××©×š ×œ×¤× ×™×™×ª×›×, ×”×¨×™× ×• ×œ×”×©×™×‘×›× ×›×“×œ×§××Ÿ ×‘× ×•×’×¢ ×œ×‘×§×©×” ×œ×”×¢×‘×¨×ª ×”×–×›×•×™×•×ª ×‘×—×•×–×” ×”×©×›×™×¨×•×ª:</p>
                    <p>1. <strong>×¨×¦×™×¤×•×ª ×¢×¡×§×™×ª:</strong> ×”×¢×‘×¨×ª ×”×–×›×•×™×•×ª × ×¢×©×™×ª ××˜×¢××™× ××¨×’×•× ×™×™× ×¤× ×™××™×™× ×œ×”×‘×˜×—×ª ×”××©×š ×”×¤×¢×œ×ª ×”×¢×¡×§ ×‘××•×©×›×¨ ×œ×œ× ×©×™× ×•×™ ×‘××•×¤×™ ×”×¤×¢×™×œ×•×ª.</p>
                    <p>2. <strong>×”×¦×“ ×”× ×›× ×¡:</strong> ×”×’×‘' <strong>×¡×××— ××—×××™×“</strong> ××§×‘×œ×ª ×¢×œ ×¢×¦××” ××ª ××œ×•× ×”×”×ª×—×™×™×‘×•×™×•×ª.</p>
                    <p>× ×•×“×” ×œ××™×©×•×¨×›×.</p>
                </div>
                <div style="margin-top: 40px;">
                    <p>×‘×›×‘×•×“ ×¨×‘,</p><p style="font-weight: bold;">×××“ ×¤×¨×¤×™×•× ×‘×¢"×</p>
                    <div style="border-top: 1px solid #000; width: 200px; margin-top: 50px; padding-top: 5px;">×—×ª×™××” ×•×—×•×ª××ª ×”×—×‘×¨×”</div>
                </div>
            `,
            invoice: `
                <div style="display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 10px;">
                    <h1 style="margin:0;">×”×¦×¢×ª ××—×™×¨ / Invoice</h1>
                    <div>#2026-1001 <br> 07/01/2026</div>
                </div>
                <div style="margin-top:20px;"><strong>×œ×›×‘×•×“:</strong> ×©× ×”×œ×§×•×—...</div>
                <table class="mad-table">
                    <thead><tr><th>×ª×™××•×¨</th><th>×›××•×ª</th><th>××—×™×¨</th><th>×¡×”"×›</th></tr></thead>
                    <tbody>
                        <tr><td>MAD Signature Perfume</td><td>10</td><td>250</td><td>2,500</td></tr>
                        <tr><td>Room Diffuser</td><td>5</td><td>120</td><td>600</td></tr>
                    </tbody>
                </table>
                <div style="text-align: left; margin-top: 20px;"><h3>×¡×”"×› ×œ×ª×©×œ×•×: â‚ª 3,100</h3></div>
            `
        };

        // Functions
        function loadTemplate(type) { document.getElementById('mainContent').innerHTML = templates[type] || templates['letter']; }
        function setTheme(color) { document.documentElement.style.setProperty('--theme-color', color); }
        function toggleFrame(val) { document.getElementById('page').classList.toggle('show-frame', val === 'yes'); }
        function resizeEl(id, val, prop) { 
            const el = document.getElementById(id); 
            if(prop === 'width') el.style.width = val + 'px'; 
        }
        function loadImage(input, id) {
            if(input.files && input.files[0]) {
                document.getElementById(id).src = URL.createObjectURL(input.files[0]);
            }
        }

        // Drag & Drop
        let isDragging = false, startX, startY, initLeft, initTop;
        const stampWrap = document.getElementById('stamp-wrapper');
        function startDrag(e) {
            e.preventDefault(); isDragging = true;
            startX = e.clientX; startY = e.clientY;
            initLeft = stampWrap.offsetLeft; initTop = stampWrap.offsetTop;
            stampWrap.style.cursor = 'grabbing';
            document.addEventListener('mousemove', doDrag);
            document.addEventListener('mouseup', stopDrag);
        }
        function doDrag(e) {
            if(!isDragging) return;
            stampWrap.style.left = (initLeft + e.clientX - startX) + 'px';
            stampWrap.style.top = (initTop + e.clientY - startY) + 'px';
        }
        function stopDrag() {
            isDragging = false; stampWrap.style.cursor = 'grab';
            document.removeEventListener('mousemove', doDrag);
            document.removeEventListener('mouseup', stopDrag);
        }

        // Init
        loadTemplate('letter');
    </script>
</body>
</html>
